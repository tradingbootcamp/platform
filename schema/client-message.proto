syntax = "proto3";
package websocket_api;

import "make-transfer.proto";
import "create-market.proto";
import "create-universe.proto";
import "create-market-type.proto";
import "delete-market-type.proto";
import "create-market-group.proto";
import "create-auction.proto";
import "settle-market.proto";
import "edit-market.proto";
import "settle-auction.proto";
import "edit-auction.proto";
import "create-order.proto";
import "out.proto";
import "redeem.proto";
import "buy-auction.proto";
import "market-positions.proto";

message ClientMessage {
  string request_id = 14;
  oneof message {
    CreateMarket create_market = 1;
    SettleMarket settle_market = 2;
    CreateOrder create_order = 3;
    CancelOrder cancel_order = 4;
    Out out = 5;
    MakeTransfer make_transfer = 6;
    Authenticate authenticate = 7;
    ActAs act_as = 8;
    CreateAccount create_account = 9;
    ShareOwnership share_ownership = 10;
    GetFullOrderHistory get_full_order_history = 11;
    GetFullTradeHistory get_full_trade_history = 12;
    Redeem redeem = 13;
    CreateAuction create_auction = 15;
    SettleAuction settle_auction = 16;
    DeleteAuction delete_auction = 17;
    EditMarket edit_market = 18;
    EditAuction edit_auction = 25;
    RevokeOwnership revoke_ownership = 19;
    BuyAuction buy_auction = 20;
    CreateMarketType create_market_type = 21;
    DeleteMarketType delete_market_type = 22;
    CreateMarketGroup create_market_group = 23;
    GetMarketPositions get_market_positions = 24;
    SetSudo set_sudo = 26;
    CreateUniverse create_universe = 27;
    AuthenticateAnonymous authenticate_anonymous = 28;
  }
}
message AuthenticateAnonymous {}
message GetFullOrderHistory {
  int64 market_id = 1;
}
message GetFullTradeHistory {
  int64 market_id = 1;
}
message CancelOrder {
  int64 id = 1;
}
message Authenticate {
  string jwt = 1;
  string id_jwt = 2;
  int64 act_as = 4;
}
message ActAs {
  int64 account_id = 1;
}
message CreateAccount {
  int64 owner_id = 1;
  string name = 2;
  int64 universe_id = 3;      // Which universe (default 0)
  double initial_balance = 4;  // Optional starting clips
}
message ShareOwnership {
  int64 of_account_id = 1;
  int64 to_account_id = 2;
}
message RevokeOwnership {
  int64 of_account_id = 1;
  int64 from_account_id = 2;
}
message DeleteAuction {
  int64 auction_id = 1;
}
message SetSudo {
  bool enabled = 1;
}
